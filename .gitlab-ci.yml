image: node:latest

stages:
    - "deploy"

deploy:android:
    stage: deploy
    before_script:
        - npm install
    script:
        - cd android &&  chmod +x ./gradlew assembleRelease
        - cp android/app/build/outputs/apk/app-release.apk $CI_PROJECT_NAME-$CI_COMMIT_REF_NAME.apk
    artifacts:
        name: "$CI_PROJECT_NAME-$PLATFORM-$CI_COMMIT_REF_NAME"
        paths:
            - $CI_PROJECT_NAME-$CI_COMMIT_REF_NAME.apk
        expire_in: 7 days
